{"version":3,"sources":["webpack:///D:/HBuilderXProjects/store/pages/goods/goods.vue?9951","webpack:///D:/HBuilderXProjects/store/pages/goods/goods.vue?6ace","uni-app:///main.js",null,"webpack:///D:/HBuilderXProjects/store/pages/goods/goods.vue?004d","webpack:///D:/HBuilderXProjects/store/pages/goods/goods.vue?3b79","webpack:///D:/HBuilderXProjects/store/pages/goods/goods.vue?1161","uni-app:///pages/goods/goods.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAA8kC,CAAgB,6jCAAG,EAAC,C;;;;;;;;;;;ACAlmC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;kDCNL;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACkM;AAClM,gBAAgB,4MAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAA6vB,CAAgB,0wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoBjxB;AACA,6D;;;;AAIA;AACA;AACA,gCADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,mBADA;AAEA,WAFA;AAGA,eAHA;AAIA,eAJA;AAKA,iBALA;AAMA;AACA,mBAPA;AAQA,iBARA;AASA,eATA;AAUA,2BAVA;AAWA,qBAXA;AAYA,sBAZA;AAaA,qBAbA;AAcA,mBAdA;AAeA,kBAfA;AAgBA,uBAhBA;AAiBA,uBAjBA;AAkBA,eAlBA;AAmBA,gCAnBA;AAoBA,yBApBA;AAqBA,eArBA;AAsBA,cAtBA;AAuBA,gBAvBA;AAwBA,qBAxBA;AAyBA,uBAzBA;AA0BA,sBA1BA;AA2BA,qBA3BA;AA4BA,mBA5BA;AA6BA,uDA7BA;AA8BA,gEA9BA;AA+BA,yDA/BA;AAgCA,gBAhCA;AAiCA,aAjCA;AAkCA,eAlCA;AAmCA,mBAnCA;AAoCA,iBApCA;AAqCA,uBArCA;AAsCA,wBAtCA;;AAwCA,GA7CA;AA8CA;AACA,gBADA,0BACA;AACA;AACA,mBADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAzBA;;AA2BA,KA7BA;AA8BA,kBA9BA,0BA8BA,iBA9BA,EA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,sCAFA,EADA,EADA;;;;AAQA;AACA;AACA;;AAEA,OAFA;;AAIA,KArDA;AAsDA,iBAtDA,yBAsDA,KAtDA,EAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA,aAdA,MAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5GA;AA6GA,mBA7GA,6BA6GA;AACA;AACA,mBADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA,OANA;;AAQA,KAtHA;AAuHA,iBAvHA,2BAuHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aADA,EACA,eADA,GACA,EADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA1IA;;AA4IA,eA5IA,uBA4IA,EA5IA,EA4IA,UA5IA,EA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA1KA;AA2KA,kBA3KA,4BA2KA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OANA,EAMA,GANA,CAMA;AACA;AACA,OARA;AASA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA,KA5LA;AA6LA,uBA7LA,iCA6LA;AACA;AACA;AACA;AACA;AACA,uDADA;AAEA,oBAFA;AAGA,uBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/MA;AAgNA,qBAhNA,+BAgNA;AACA;AACA;AACA,OAFA;AAGA;AACA,KArNA,EA9CA;;AAqQA,QArQA,kBAqQA,OArQA,EAqQA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCADA;AAEA,gCAFA;AAGA;AACA;AACA,6BADA;;AAGA,OATA;;;AAYA;AACA,GAzSA,E","file":"pages/goods/goods.js","sourcesContent":["import mod from \"-!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1607596375061\n      var cssReload = require(\"D:/HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/goods/goods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods.vue?vue&type=template&id=5566b618&\"\nvar renderjs\nimport script from \"./goods.vue?vue&type=script&lang=js&\"\nexport * from \"./goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/goods/goods.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=template&id=5566b618&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.__get_style([_vm.winHeight, _vm.zIndexOptions])\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.2.8.13.20200927.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=script&lang=js&\"","<template>\r\n\t<scroll-view class=\"container\" :style=\"[winHeight , zIndexOptions]\" scroll-y=\"true\">\r\n\t\t<view v-if=\"!openAttr\">\r\n\t\t\t<view class='swiBox'>\r\n\t\t\t\t<swiper class=\"goodsimgs\" indicator-dots=\"true\" autoplay=\"true\" interval=\"3000\" duration=\"1000\">\r\n\t\t\t\t\t<swiper-item v-for=\"item in gallery\" :key=\"item.id\">\r\n\t\t\t\t\t\t<image :src=\"item.imgUrl\" background-size=\"cover\"></image>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</swiper>\r\n\t\t\t\t<view class='flotbox' v-if=\"type==2\">\r\n\t\t\t\t\t<!-- <count-down-list ntype=\"1\" endTime=\"{{goods.endTime}}\" bind:downEnd=\"aa\"></count-down-list> -->\r\n\t\t\t\t\t<count-down-list ntype=\"1\" :endTime=\"goods.endTime\"></count-down-list>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</scroll-view>\r\n</template>\r\n\r\n<script>\r\n\tconst util = require('../../util/util.js');\r\n\tconst api = require('../../config/api.js');\r\n\t\r\n\timport countDownList from '../../components/countDownList/countDownList.vue';\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tcountDownList\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\twinHeight: \"\",\r\n\t\t\t\tid: 0,\r\n\t\t\t\tuserId: 0,\r\n\t\t\t\tgoods: {},\r\n\t\t\t\tgallery: [],\r\n\t\t\t\t// attribute: [],\r\n\t\t\t\tissueList: [],\r\n\t\t\t\tcomment: [],\r\n\t\t\t\tbrand: {},\r\n\t\t\t\tspecificationList: [],\r\n\t\t\t\tproductList: [],\r\n\t\t\t\trelatedGoods: [],\r\n\t\t\t\tgroupBuyLis: [],\r\n\t\t\t\tnewBuyLis: [],\r\n\t\t\t\tnewGroup: {},\r\n\t\t\t\tcartGoodsCount: 0,\r\n\t\t\t\tuserHasCollect: 0,\r\n\t\t\t\tnumber: 1,\r\n\t\t\t\tcheckedSpecText: '请选择规格数量',\r\n\t\t\t\tcheckedSpecPrice: 0,\r\n\t\t\t\typrice: 0,\r\n\t\t\t\tproId: 0,\r\n\t\t\t\tproImg: '',\r\n\t\t\t\topenAttr: false,\r\n\t\t\t\topenCoupon: false,\r\n\t\t\t\topenGroup: false,\r\n\t\t\t\topenPart: false,\r\n\t\t\t\tcimPart: true,\r\n\t\t\t\tnoCollectImage: \"/static/images/icon_collect.png\",\r\n\t\t\t\thasCollectImage: \"/static/images/icon_collect_checked.png\",\r\n\t\t\t\tcollectBackImage: \"/static/images/icon_collect.png\",\r\n\t\t\t\tnowtime: 0,\r\n\t\t\t\ttype: 0,\r\n\t\t\t\tntype: '',\r\n\t\t\t\tgroupprice: 0,\r\n\t\t\t\tgroupNum: 0,\r\n\t\t\t\tgroupBuyingId: '',\r\n\t\t\t\tzIndexOptions: ' '\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetGoodsInfo() {\r\n\t\t\t\tutil.request(api.GoodsDetail, {\r\n\t\t\t\t\tid: this.id\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tthis.goods = res.data.info;\r\n\t\t\t\t\t\tthis.gallery = res.data.gallery;\r\n\t\t\t\t\t\t// attribute: res.data.attribute,\r\n\t\t\t\t\t\tthis.issueList = res.data.issue;\r\n\t\t\t\t\t\tthis.comment = res.data.comment;\r\n\t\t\t\t\t\tthis.brand = res.data.brand;\r\n\t\t\t\t\t\tthis.specificationList = res.data.specificationList;\r\n\t\t\t\t\t\tthis.productList = res.data.productList;\r\n\t\t\t\t\t\tthis.userHasCollect = res.data.userHasCollect;\r\n\t\t\t\t\t\t//设置默认值\r\n\t\t\t\t\t\tthis.setDefSpecInfo(this.specificationList);\r\n\t\t\t\t\t\tif (res.data.userHasCollect == 1) {\r\n\t\t\t\t\t\t\tthis.collectBackImage = this.hasCollectImage;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.collectBackImage = this.noCollectImage;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(\"comment====================================\", this.comment);\r\n\t\t\t\t\t\tconsole.log('wxparse', res.data.info.goodsDesc);\r\n\t\t\t\t\t\t// WxParse.wxParse('goodsDetail', 'html', res.data.info.goodsDesc, that);\r\n\t\t\t\t\t\tthis.getGoodsRelated();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tsetDefSpecInfo(specificationList) {\r\n\t\t\t\t//未考虑规格联动情况\r\n\t\t\t\tif (!specificationList) return;\r\n\t\t\t\tfor (let i = 0; i < specificationList.length; i++) {\r\n\t\t\t\t\tlet specification = specificationList[i];\r\n\t\t\t\t\tlet specNameId = specification.specificationId;\r\n\t\t\t\t\t//规格只有一个时自动选择规格\r\n\t\t\t\t\tif (specification.valueList && specification.valueList.length == 1) {\r\n\t\t\t\t\t\tlet specValueId = specification.valueList[0].id;\r\n\t\t\t\t\t\tthis.clickSkuValue({\r\n\t\t\t\t\t\t\tcurrentTarget: {\r\n\t\t\t\t\t\t\t\tdataset: {\r\n\t\t\t\t\t\t\t\t\t\"nameId\": specNameId,\r\n\t\t\t\t\t\t\t\t\t\"valueId\": specValueId\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tspecificationList.map(function(item) {\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tclickSkuValue(event) {\r\n\t\t\t\tlet specNameId = event.currentTarget.dataset.nameId;\r\n\t\t\t\tlet specValueId = event.currentTarget.dataset.valueId + \"\";\r\n\t\t\t\tlet state = event.currentTarget.dataset.state;\r\n\t\t\t\tconst proImg = event.currentTarget.dataset.picurl;\r\n\t\t\t\t// 禁用则结束\r\n\t\t\t\tif (state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//判断是否可以点击\r\n\r\n\t\t\t\t//TODO 性能优化，可在wx:for中添加index，可以直接获取点击的属性名和属性值，不用循环\r\n\t\t\t\tlet _specificationList = this.specificationList;\r\n\t\t\t\t// console.log(\"checkedSpecPrice\",this.goods.retailPrice);\r\n\t\t\t\tfor (let i = 0; i < _specificationList.length; i++) {\r\n\t\t\t\t\tif (_specificationList[i].specificationId == specNameId) {\r\n\t\t\t\t\t\tfor (let j = 0; j < _specificationList[i].valueList.length; j++) {\r\n\t\t\t\t\t\t\tif (_specificationList[i].valueList[j].id == specValueId) {\r\n\t\t\t\t\t\t\t\t//如果已经选中，则反选\r\n\t\t\t\t\t\t\t\tif (_specificationList[i].valueList[j].checked) {\r\n\t\t\t\t\t\t\t\t\t_specificationList[i].valueList[j].checked = false;\r\n\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\tif (_specificationList.length > 1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.unSelectValue()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t_specificationList[i].valueList[j].checked = true;\r\n\t\t\t\t\t\t\t\t\tif (_specificationList.length > 1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.selectValue(specValueId, specNameId)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_specificationList[i].valueList[j].checked = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.proImg = proImg;\r\n\t\t\t\tthis.specificationList = _specificationList;\r\n\t\t\t\t// this.selectValue(specValueId, specNameId)\r\n\t\t\t\t//重新计算spec改变后的信息\r\n\t\t\t\tthis.changeSpecInfo();\r\n\t\t\t\t// 新加\r\n\t\t\t\tvar key = this.getCheckedSpecKey();\r\n\t\t\t\t// console.log(\"key\",key);\r\n\t\t\t\t// console.log(\"this.productList\",this.productList);\r\n\t\t\t\t// console.log(\"this.type\",this.type);\r\n\t\t\t\tfor (var i = 0; i < this.productList.length; i++) {\r\n\t\t\t\t\tif (this.productList[i].goodsSpecificationIds == key) {\r\n\t\t\t\t\t\tthis.checkedSpecPrice = this.type == '1' ? this.productList[i].groupPrice : this.productList[i].retailPrice;\r\n\t\t\t\t\t\tthis.yprice = this.productList[i].retailPrice;\r\n\t\t\t\t\t\tthis.proId = this.productList[i].id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetGoodsRelated() {\r\n\t\t\t\tutil.request(api.GoodsRelated, {\r\n\t\t\t\t\tid: this.id\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tthis.relatedGoods = res.data.goodsList;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tunSelectValue() {\r\n\t\t\t\tvar n = 0;\r\n\t\t\t\tfor (var z = 0; z < this.specificationList.length; z++) {\r\n\t\t\t\t\tfor (var y = 0; y < this.specificationList[z].valueList.length; y++) {\r\n\t\t\t\t\t\tif (this.specificationList[z].valueList[y].checked) {\r\n\t\t\t\t\t\t\tn += 1;\r\n\t\t\t\t\t\t\tthis.selectValue(this.specificationList[z].valueList[y].id + \"\", this.specificationList[z].valueList[\r\n\t\t\t\t\t\t\t\ty].specificationId + \"\")\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (n == 0) {\r\n\t\t\t\t\tfor (var m = 0; m < this.specificationList.length; m++) {\r\n\t\t\t\t\t\tfor (var n = 0; n < this.specificationList[m].valueList.length; n++) {\r\n\t\t\t\t\t\t\tthis.specificationList[m].valueList[n].state = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tselectValue(id, specNameId) {\r\n\t\t\t\tvar newAttrIds = []\r\n\t\t\t\tfor (var i = 0; i < this.productList.length; i++) {\r\n\t\t\t\t\tvar selArr = [];\r\n\t\t\t\t\tif (this.productList[i].goodsSpecificationIds.indexOf('_') > -1) {\r\n\t\t\t\t\t\tselArr = this.productList[i].goodsSpecificationIds.split('_')\r\n\t\t\t\t\t\tif (selArr.indexOf(id) > -1) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < selArr.length; j++) {\r\n\t\t\t\t\t\t\t\tif (selArr[j] != id) {\r\n\t\t\t\t\t\t\t\t\tif (newAttrIds.indexOf(selArr[j]) <= -1) {\r\n\t\t\t\t\t\t\t\t\t\tnewAttrIds.push(selArr[j])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var z = 0; z < this.specificationList.length; z++) {\r\n\t\t\t\t\tfor (var y = 0; y < this.specificationList[z].valueList.length; y++) {\r\n\t\t\t\t\t\tif (this.specificationList[z].specificationId != specNameId) {\r\n\t\t\t\t\t\t\tvar nid = this.specificationList[z].valueList[y].id + \"\"\r\n\t\t\t\t\t\t\tif (newAttrIds.indexOf(nid) > -1) {\r\n\t\t\t\t\t\t\t\tthis.specificationList[z].valueList[y].state = false\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.specificationList[z].valueList[y].state = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.specificationList = this.specificationList;\r\n\t\t\t},\r\n\t\t\tchangeSpecInfo() {\r\n\t\t\t\tlet checkedNameValue = this.getCheckedSpecValue();\r\n\t\t\t\tlet checkedValue = checkedNameValue.filter(function(v) {\r\n\t\t\t\t\tif (v.valueId != 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}).map(function(v) {\r\n\t\t\t\t\treturn v.valueText;\r\n\t\t\t\t});\r\n\t\t\t\tif (checkedValue.length > 0) {\r\n\t\t\t\t\tthis.checkedSpecText = checkedValue.join('　');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.checkedSpecText = '请选择规格数量';\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tgetCheckedSpecValue() {\r\n\t\t\t\tlet checkedValues = [];\r\n\t\t\t\tlet _specificationList = this.specificationList;\r\n\t\t\t\tfor (let i = 0; i < _specificationList.length; i++) {\r\n\t\t\t\t\tlet _checkedObj = {\r\n\t\t\t\t\t\tnameId: _specificationList[i].specificationId,\r\n\t\t\t\t\t\tvalueId: 0,\r\n\t\t\t\t\t\tvalueText: ''\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (let j = 0; j < _specificationList[i].valueList.length; j++) {\r\n\t\t\t\t\t\tif (_specificationList[i].valueList[j].checked) {\r\n\t\t\t\t\t\t\t_checkedObj.valueId = _specificationList[i].valueList[j].id;\r\n\t\t\t\t\t\t\t_checkedObj.valueText = _specificationList[i].valueList[j].value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheckedValues.push(_checkedObj);\r\n\t\t\t\t}\r\n\t\t\t\treturn checkedValues;\r\n\t\t\t},\r\n\t\t\tgetCheckedSpecKey() {\r\n\t\t\t\tlet checkedValue = this.getCheckedSpecValue().map(function(v) {\r\n\t\t\t\t\treturn v.valueId;\r\n\t\t\t\t});\r\n\t\t\t\treturn checkedValue.join('_');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.nowtime = new Date().getTime() + 20000;\r\n\r\n\t\t\tif (options.id) {\r\n\t\t\t\tthis.id = options.id;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.type) {\r\n\t\t\t\tthis.type = options.type;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.userId) {\r\n\t\t\t\tuni.setStorageSync('userId', options.userId);\r\n\t\t\t}\r\n\r\n\t\t\tif (options.q) {\r\n\t\t\t\tconst q = decodeURIComponent(options.q);\r\n\t\t\t\tthis.id = util.getQueryString(q, 'id');\r\n\t\t\t\tuni.setStorageSync('userId', util.getQueryString(q, 'userId'))\r\n\t\t\t\t//又是登陆的事情，暂时不想碰\r\n\t\t\t\t//this.newLogin()\r\n\t\t\t}\r\n\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tvar clientHeight = res.windowHeight,\r\n\t\t\t\t\t\tclientWidth = res.windowWidth,\r\n\t\t\t\t\t\trpxR = 750 / clientWidth;\r\n\t\t\t\t\tvar calc = clientHeight * rpxR - 100;\r\n\t\t\t\t\tthis.winHeight = {\r\n\t\t\t\t\t\theight: calc + 'px'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.getGoodsInfo();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.swiBox {\r\n\t\twidth: 750rpx;\r\n\t\theight: 750rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.goodsimgs {\r\n\t\twidth: 750rpx;\r\n\t\theight: 750rpx;\r\n\t}\r\n\r\n\t.swiBox .flotbox {\r\n\t\tposition: absolute;\r\n\t\ttop: 650rpx;\r\n\t\tright: 0;\r\n\t\tz-index: 1000;\r\n\t}\r\n\r\n\t.goodsimgs image {\r\n\t\twidth: 750rpx;\r\n\t\theight: 750rpx;\r\n\t}\r\n</style>\n"],"sourceRoot":""}